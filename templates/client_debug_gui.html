<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spautify</title>
</head>
<style>
  :root{
    --bg1:#2b2b2b;
    --bg2:#000;
    --card: rgba(255,255,255,.08);
    --cardBorder: rgba(255,255,255,.12);
    --text: rgba(255,255,255,.92);
    --muted: rgba(255,255,255,.65);
    --accent: #7CFF4A; /* vert style */
  }

  *{ box-sizing: border-box; }

  body{
    margin: 0;
    min-height: 100vh;

    /* fond gris -> noir */
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
    background-repeat: no-repeat;
    background-attachment: fixed;

    color: var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }

  /* conteneur page (si tu as un wrapper) */
  .container{
    max-width: 1000px;
    margin: 0 auto;
    padding: 24px 16px;
  }

  /* une chanson (card) */
  .r_song{
    display: flex;
    align-items: center;
    gap: 12px;

    background: var(--card);
    border: 1px solid var(--cardBorder);
    border-radius: 14px;
    padding: 12px 14px;

    backdrop-filter: blur(10px);
    cursor: pointer;

    transition: transform .12s ease, border-color .12s ease, background .12s ease;
  }

  .r_song:hover{
    transform: translateY(-1px);
    border-color: rgba(124,255,74,.55);
    background: rgba(255,255,255,.12);
  }

  .r_song:active{
    transform: translateY(0px);
  }

  /* cover */
  .r_song img{
    width: 52px;
    height: 52px;
    border-radius: 10px;
    object-fit: cover;
    border: 1px solid rgba(255,255,255,.15);
  }

  /* textes */
  .r_song .title{
    font-weight: 700;
    line-height: 1.1;
  }

  .r_song .meta{
    font-size: 13px;
    color: var(--muted);
    margin-top: 2px;
  }

  /* petit badge dur√©e (optionnel) */
  .r_song .duration{
    margin-left: auto;
    font-size: 12px;
    color: var(--muted);
    border: 1px solid rgba(255,255,255,.14);
    border-radius: 999px;
    padding: 6px 10px;
  }
</style>
<body>
    <center>
    <h1>Spautify v1</h1>
    <form method="get">
        <input type="text" id="sct" name="q" placeholder="Search some songs" value="{{q}}">
        <button type="submit">Search</button>
    </form>
    <br>
    <div id="player"></div>
    </center>
    {{length}}
    <ul>
        {% for song in songs %}
        <li>
            <div class="r_song">
            {{song.title}} - {{song.author}}
            <button onclick="launch('/play/{{ song.file }}','/image/{{song.cover}}')">Play</button>
            </div>
        </li>
        {% endfor %}
    </ul>
</body>
<script src="{{ url_for('static', filename='js/playerjs.js') }}"></script>

<script>
    let global_volume = 0.4;
    let player_on = false;
    document.getElementById("sct").value = ""
    let current_song = document.getElementById("current_song");
    function launch(song,poster){
        if(player_on){const iframe = document.getElementById('player');
         if (iframe) iframe.remove();}
        else{var player = new Playerjs({id:"player",poster:poster});}
        player.api("file",song)
    }
</script>
</html>